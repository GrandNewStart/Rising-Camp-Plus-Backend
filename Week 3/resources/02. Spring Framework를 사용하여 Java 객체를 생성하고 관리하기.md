# Spring Framework를 사용하여 Java 객체를 생성하고 관리하기

이전까진 Spring에서 관리하는 클래스들을 내가 직접 생성해줬지만 이를 자동화하여 코드를 획기적으로 줄일 수 있다. 다음과 같이 @Component와 @ComponentScan 어노테이션을 사용하면 Spring이 자동으로 필요에 따라 필요한 Bean 객체를 생성하도록 할 수 있다.

메인 파일
```java
package com.ade.learnspringframework.app04;

@Configuration
@ComponentScan("com.ade.learnspringframework.app04") // Component를 탐색할 패키지 경로를 지정한다. 
public class App04GamingBasic {

    public static void main(String[] args) {
        try (var context = new AnnotationConfigApplicationContext(App04GamingBasic.class)) {
            GameRunner gameRunner = context.getBean(GameRunner.class);
            gameRunner.run();
        } catch(Exception exception) {
            System.out.println(exception.getMessage());
        }
    }

}
```

GameRunner.java
```java    
package com.ade.learnspringframework.app04;

import org.springframework.stereotype.Component;

@Component // 이 어노테이션을 통해 Spring에게 이게 Component라는 것을 알린다.
public class GameRunner {

    GamingConsole game;

    public GameRunner(GamingConsole game) {
        this.game = game;
    }

    public void run() {
        System.out.println("Running game: " + game);
        game.up();
        game.down();
        game.left();
        game.right();
    }

}
```

MarioGame.java
```java
package com.ade.learnspringframework.app04;

import org.springframework.stereotype.Component;

@Component // 얘도 마찬가지
public class MarioGame implements GamingConsole {

    public void up() {
        System.out.println("Jump");
    }

    public void down() {
        System.out.println("Go into a hole");
    }

    public void left() {
        System.out.println("Go back");
    }

    public void right() {
        System.out.println("Accelerate");
    }

}
```

여기서 GamingConsole 구현체를 추가하면 에러가 날 것이다. GamingConsole에 대해 다수의 Bean Candidate이 감지되었는데 @Primary로 지정된 것이 없기 때문이다. 그래서 MarioGame을 @Primary로 지정하고 SonicGame, PacManGame 등에는 @Qualifier 어노테이션을 주어 상황에 따라 바꿔 쓸 수 있도록 세팅해보자.

```java
@Component
@Primary
public class MarioGame implements GamingConsole {
    ...
}

@Component
@Qualifier("SonicGameQualifier")
public class SonicGame implements GamingConsole {
    ...
}

@Component
@Qualifier("PacManGameQualifier")
public class PacManGame implements GamingConsole {
    ...
}

@Component
public class GameRunner {

    GamingConsole game;

    // 여기서 지정한 Qualifier에 의해 자동으로 SonicGame이 GamingConsole로 생성된다.
    public GameRunner(@Qualifier("SonicGameQualifier") GamingConsole game) {
        this.game = game;
    }

    public void run() {
        System.out.println("Running game: " + game);
        game.up();
        game.down();
        game.left();
        game.right();
    }

}
```
