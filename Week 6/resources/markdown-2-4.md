# 컨테이너

## 마이크로서비스란?
점점 많은 기업들이 마이크로서비스 아키텍쳐를 채택하고있다. 이는 하나의 큰 서비스를 여러 단위로 쪼개 구현하는 방식으로, 한 서비스를 여러가지 언어로 구현할 수 있는 유연함을 제공한다는 장점이 있다. 하지만 그렇기 때문에 시스템 전체적인 복잡도는 올라간다는 단점도 존재한다. 각각의 서비스들에 대해 서로다른 배포 방식을 관리해야 하기 때문에 더더욱 그렇다.

그렇기 때문에 컨테이너라는 개념이 생겨났다. 그리고 도커는 가장 유명한 컨테이너의 한 종류이다.

## 도커

각 마이크로서비스에 대해 도커 이미지를 만든다. 그리고 도커 이미지 안에는 마이크로서비스를 위한 모든 것들이 갖춰져있다. 도커는 클라우드 플랫폼을 가리지 않고 동작하며 표준화된 동작을 통해 어떤 언어로된 어플리케이션이든 배포, 모니터링, 로깅 등을 동일하게 수행한다. 또한 가상머신과는 다르게 게스트 OS가 존재하지 않기 때문에 가벼우며 컨테이너 사이의 완벽한 고립을 제공한다. 

## AWS의 컨테이너 오케스트레이션

마이크로서비스 A의 인스턴스를 10개, B의 인스턴스를 15개...이런 식으로 배포한다고 하자.

이런 상황에서 필요한 기능들은 다음과 같다.
    - Auto Scaling: 트래픽에 따라 컨테이너의 숫자를 조절한다.
    - Service Discovery: 마이크로서비스들끼리 서로를 찾을 수 있게 한다.
    - Load Balancer: 마이크로서비스들 사이에 부하를 적절히 분류할 수 있도록 한다.
    - Self Healing: 자가진단 후 실패한 인스턴스들을 정상 인스턴스로 교체한다.
    - Zero Downtime Deployments: 다운되는 시간 없이, 끊김없이 배포가 이뤄지도록 한다.
    
컨테이너 오메스트레이션이란, 다수의 컨테이너들을 취합하여 클러스터라는 하나의 서비스로 만들어주는 과정이다. 따라서 컨테이너 오케스트레이션은 위의 기능들을 제공해야한다.

가장 많이 쓰이는 컨테이너 오케스트레이션 도구는 오픈 소스인 쿠버네티스다. AWS는 EKS(Elastic Kubernetes Service)를 통해 쿠버네티스를 제공하는데 다만 무료 버전은 없다.

또 AWS는 ECS(Elastic Container Service)라는 자체적인 컨테이너 오케스트레이션 기능도 제공한다. 또 AWS Fargate라는 서버리스 형태의 ECS/EKS도 제공하고 있다. 다만 이것도 무료 버전은 없다. 
